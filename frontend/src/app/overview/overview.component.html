<div class="space-y-8">
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
    <div
      class="bg-white border border-slate-200 rounded-lg p-5 shadow-sm hover:bg-slate-50 transition"
    >
      <p class="text-sm text-slate-600">Total Suppliers</p>
      <p class="text-3xl font-semibold text-blue-500 mt-2">
        {{ stats()?.totalSuppliers ?? '—' }}
      </p>
    </div>

    <div
      class="bg-white border border-slate-200 rounded-lg p-5 shadow-sm hover:bg-slate-50 transition"
    >
      <p class="text-sm text-slate-600">High-Risk Suppliers</p>
      <p class="text-3xl font-semibold text-red-500 mt-2">
        {{ stats()?.highRiskSuppliers ?? '—' }}
      </p>
    </div>

    <div
      class="bg-white border border-slate-200 rounded-lg p-5 shadow-sm hover:bg-slate-50 transition"
    >
      <p class="text-sm text-slate-600">Average Risk Score</p>
      <p class="text-3xl font-semibold text-slate-900 mt-2">
        <ng-container *ngIf="stats()?.averageRiskScore != null; else dash">
          {{ stats()?.averageRiskScore | number : '1.1-1' }}
        </ng-container>
        <ng-template #dash>—</ng-template>
      </p>
    </div>

    <div
      class="bg-white border border-slate-200 rounded-lg p-5 shadow-sm hover:bg-slate-50 transition"
    >
      <p class="text-sm text-slate-600">Active Alerts</p>
      <p class="text-3xl font-semibold text-red-600 mt-2">
        {{ stats()?.activeAlerts ?? '—' }}
      </p>
    </div>
  </div>

  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
    <div class="bg-white border border-slate-200 rounded-lg p-6">
      <h2 class="text-lg font-semibold text-slate-900 mb-2">Average Risk Trend</h2>
      <p class="text-sm text-slate-600 mb-4">Average supplier risk score over time</p>
      <div class="h-64">
        <canvas id="riskTrendChart"></canvas>
      </div>
    </div>

    <div class="bg-white border border-slate-200 rounded-lg p-6">
      <h2 class="text-lg font-semibold text-slate-900 mb-2">Supplier Risk Map</h2>
      <p class="text-sm text-slate-600 mb-4">Suppliers color-coded by risk level</p>
      <div id="supplierMap" class="h-64 rounded"></div>
    </div>
  </div>

  <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
    <div class="lg:col-span-2 bg-white border border-slate-200 rounded-lg p-6">
      <h2 class="text-lg font-semibold text-slate-900 mb-4">Recent Alerts</h2>

      <div class="space-y-3 max-h-64 overflow-y-auto">
        <div
          *ngFor="let alert of filteredAlerts()"
          class="flex items-center justify-between p-3 border border-slate-200 rounded"
        >
          <span class="text-sm text-slate-900">
            {{ alert.message }}
            <span class="text-xs text-slate-500"> — {{ alert.supplier?.name }} </span>
          </span>

          <span
            class="text-xs font-medium"
            [ngClass]="{
              'text-red-500': alert.severity === 'CRITICAL',
              'text-amber-500': alert.severity === 'MODERATE',
              'text-blue-500': alert.severity === 'INFO'
            }"
          >
            {{ alert.severity }}
          </span>
        </div>

        <div *ngIf="filteredAlerts().length === 0" class="text-sm text-slate-500">
          No alerts match the selected filters
        </div>
      </div>
    </div>

    <div class="bg-white border border-slate-200 rounded-lg p-6">
      <h2 class="text-lg font-semibold text-slate-900 mb-4">Filters</h2>

      <div class="space-y-4">
        <div>
          <label class="text-sm text-slate-600">Region</label>
          <select
            class="w-full mt-1 bg-slate-50 border border-slate-300 rounded px-3 py-2 text-sm"
            [ngModel]="selectedRegion()"
            (ngModelChange)="selectedRegion.set($event); applyFilters()"
          >
            <option>All</option>
            <option>North America</option>
            <option>Europe</option>
            <option>Asia</option>
            <option>Africa</option>
            <option>South America</option>
          </select>
        </div>

        <div>
          <label class="text-sm text-slate-600">Industry</label>
          <select
            class="w-full mt-1 bg-slate-50 border border-slate-300 rounded px-3 py-2 text-sm"
            [ngModel]="selectedIndustry()"
            (ngModelChange)="selectedIndustry.set($event); applyFilters()"
          >
            <option>All</option>
            <option>Manufacturing</option>
            <option>Logistics</option>
            <option>Technology</option>
            <option>Mining</option>
            <option>Pharmaceuticals</option>
            <option>Food Processing</option>
          </select>
        </div>

        <div>
          <label class="text-sm text-slate-600">Risk Level</label>
          <select
            class="w-full mt-1 bg-slate-50 border border-slate-300 rounded px-3 py-2 text-sm"
            [ngModel]="selectedRiskLevel()"
            (ngModelChange)="selectedRiskLevel.set($event); applyFilters()"
          >
            <option>All</option>
            <option>CRITICAL</option>
            <option>MODERATE</option>
            <option>LOW</option>
            <option>INFO</option>
          </select>
        </div>
      </div>
    </div>
  </div>
</div>
